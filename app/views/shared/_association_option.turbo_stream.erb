<turbo-stream action="append" target="results">
  <template>
    <li
      data-action="<%= selected_ids&.include?(item.send(value_field || :id).to_s) ? nil : "click->association-selector#select" %>"
      data-value="<%= item.send(value_field || :id) %>"
      data-label="<%= item.send(display_field || :name) %>"
      class="cursor-pointer hover:bg-blue-100 px-3 py-2 border-b text-sm
             <%= 'opacity-50 pointer-events-none' if selected_ids&.include?(item.send(value_field || :id).to_s) %>">
      <%= item.send(display_field || :name) %>
      <% if selected_ids&.include?(item.send(value_field || :id).to_s) %>
        <span class="ml-2 text-xs text-gray-500">(選択済み)</span>
      <% end %>
    </li>
  </template>
</turbo-stream>
