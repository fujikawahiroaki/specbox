<%= turbo_frame_tag "content-zone" do %>
  <div class="w-full">

    <% content_for :institution_code, "default_taxa" %>

    <div class="flex justify-between items-center mb-2">
      <h1 class="font-bold text-xl">„Éá„Éï„Ç©„É´„ÉàÂàÜÈ°ûüè∑Ô∏è</h1>

      <div>
        <% if notice.present? %>
          <p class="left-1/2 py-2 px-3 bg-green-50 mb-5 text-green-500 text-sm rounded-lg inline-block z-50" id="flash-message" data-controller="flash"><%= notice %></p>
        <% end %>
        <% if alert.present? %>
          <p class="left-1/2 py-2 px-3 bg-red-50 mb-5 text-red-500 text-sm rounded-lg inline-block z-50" id="flash-message" data-controller="flash"><%= alert %></p>
        <% end %>
      </div>

      <div class="my-4 flex gap-4">
        <%= link_to "‚¨áÔ∏è CSV„ÇíDL", export_csv_default_taxa_path(q: params[:q]),
          class: "text-sm rounded-lg py-3 px-5 normal-button text-black block font-medium",
          data: { turbo: false } %>

        <%= link_to "‚¨áÔ∏è ExcelÁî®CSV„ÇíDL", export_csv_excel_default_taxa_path(q: params[:q]),
          class: "text-sm rounded-lg py-3 px-5 normal-button text-black block font-medium",
          data: { turbo: false } %>
      </div>
    </div>

    <div class="m-2 p-2 rounded-md border border-gray">
      <p class="text-sm">
        CSV„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅÆÂØæË±°„ÅØÊ§úÁ¥¢„Å´ÂêàËá¥„Åó„Åü„Éá„Éº„Çø„Åß„Åô„ÄÇÂÖ®„Éá„Éº„Çø„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åü„ÅÑÂ†¥Âêà„ÅØÊ§úÁ¥¢Áä∂ÊÖã„Çí„ÇØ„É™„Ç¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
      </p>
      </p>
      <p class="text-sm">
        Â§ßÈáè„Éá„Éº„Çø„ÅÆCSV„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Å´„ÅØÊôÇÈñì„Åå„Åã„Åã„Çã„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅåÂÆå‰∫Ü„Åô„Çã„Åæ„Åß„ÄÅ„Éá„Éº„Çø„ÅÆ‰ΩúÊàê„ÉªÁ∑®ÈõÜ„ÉªÂâäÈô§„ÅØ„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ
      </p>
      <p class="text-sm">
        CSVÊ∫ñÂÇô‰∏≠„Å´„ÇÇ‰ªñ„ÅÆ„Éö„Éº„Ç∏„Å∏„ÅÆÁßªÂãï„ÅØÂèØËÉΩ„Åß„Åô„ÄÇÂÆå‰∫Ü„ÅóÊ¨°Á¨¨„ÄÅ„Éñ„É©„Ç¶„Ç∂„Åã„ÇâÈÄöÁü•„Åï„Çå„Åæ„Åô„ÄÇ
      </p>
    </div>

    <div class="m-2 p-2 rounded-md border border-gray">
      <p class="text-sm">
        „Éá„Éï„Ç©„É´„ÉàÂàÜÈ°û„ÅØ‰∏ãË®ò„ÅÆ„Éá„Éº„Çø„Çí„ÅäÂÄü„Çä„Åó„Å¶‰ΩúÊàê„Åó„Åæ„Åó„Åü„ÄÇ
      </p>
      <ul class="text-sm m-2 text-blue-500">
        <li><%= link_to "Êó•Êú¨ÂàóÂ≥∂„ÅÆÁî≤Ëô´ÂÖ®Á®ÆÁõÆÈå≤(Èà¥Êú®ËåÇ„Åï„Åæ‰Ωú) 2020Âπ¥Áâà", "https://japanesebeetles.jimdofree.com", target: :_blank %></li>
        <li><%= link_to "List-MJ Êó•Êú¨Áî£ËõæÈ°ûÁ∑èÁõÆÈå≤(Á•û‰øùÂÆáÂó£„Åï„Åæ‰Ωú) 2020Âπ¥Áâà", "http://listmj.mothprog.com", target: :_blank %></li>
      </ul>
      <p class="text-sm">
        „É™„Çπ„Éà„ÅÆ„Äå„Ç´„Çπ„Çø„É†„Äç„Éú„Çø„É≥„ÇíÊäº„Åô„Å®„ÄÅ„Åù„ÅÆ„Éá„Éï„Ç©„É´„ÉàÂàÜÈ°û„Çí„Éô„Éº„Çπ„Å´„Ç´„Çπ„Çø„É†ÂàÜÈ°û„Çí‰ΩúÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ
      </p>
      <p class="text-sm">
        „Éá„Éï„Ç©„É´„ÉàÂàÜÈ°û„ÅØÂè§„Åè„Å™„Å£„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÆÂ†¥Âêà„ÅØ„Ç´„Çπ„Çø„É†„Åó„Å¶„Åä‰Ωø„ÅÑ„Åè„Å†„Åï„ÅÑ„ÄÇ
      </p>
    </div>

    <div class="m-2 rounded-md border border-gray">
      <%= render "shared/accent_copy" %>
    </div>

    <div
      data-controller="filter-choice"
      data-filter-choice-model-name-value="default_taxon"
      data-default-visible-fields="<%= ['all_taxon_name_cont'].to_json %>"
    >
      <div>
        <div class="relative inline-block">
          <!-- „Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åß„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„Çí„Éà„Ç∞„É´ -->
          <button class="normal-button text-sm px-2 py-1 rounded-md border border-gray" data-action="click->filter-choice#toggleDropdown" data-filter-choice-target="toggleButton">
            Ê§úÁ¥¢È†ÖÁõÆ„ÇíÈÅ∏Êäû ‚ñº
          </button>

          <!-- „Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„É°„Éã„É•„Éº -->
          <div class="text-xs absolute top-full left-0 normal-button shadow-lg border p-2 hidden bg-[#E9F5F8] z-50 whitespace-nowrap"
               data-filter-choice-target="dropdown"
               data-action="click->filter-choice#keepDropdownOpen">
               <% columns = {
                 all_taxon_name_cont: 'Â≠¶Âêç„ÉªÂíåÂêç„ÅÇ„ÅÑ„Åæ„ÅÑ',
                 kingdom_cont: 'Áïå(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 kingdom_eq: 'Áïå(ÂÆåÂÖ®‰∏ÄËá¥)',
                 phylum_cont: 'ÈñÄ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 phylum_eq: 'ÈñÄ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 class_name_cont: 'Èãº(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 class_name_eq: 'Èãº(ÂÆåÂÖ®‰∏ÄËá¥)',
                 order_cont: 'ÁõÆ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 order_eq: 'ÁõÆ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 suborder_cont: '‰∫úÁõÆ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 suborder_eq: '‰∫úÁõÆ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 family_cont: 'Áßë(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 family_eq: 'Áßë(ÂÆåÂÖ®‰∏ÄËá¥)',
                 subfamily_cont: '‰∫úÁßë(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 subfamily_eq: '‰∫úÁßë(ÂÆåÂÖ®‰∏ÄËá¥)',
                 tribe_cont: 'Êóè(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 tribe_eq: 'Êóè(ÂÆåÂÖ®‰∏ÄËá¥)',
                 subtribe_cont: '‰∫úÊóè(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 subtribe_eq: '‰∫úÊóè(ÂÆåÂÖ®‰∏ÄËá¥)',
                 genus_cont: 'Â±û(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 genus_eq: 'Â±û(ÂÆåÂÖ®‰∏ÄËá¥)',
                 subgenus_cont: '‰∫úÂ±û(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 subgenus_eq: '‰∫úÂ±û(ÂÆåÂÖ®‰∏ÄËá¥)',
                 species_cont: 'Á®Æ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 species_eq: 'Á®Æ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 subspecies_cont: '‰∫úÁ®Æ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 subspecies_eq: '‰∫úÁ®Æ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 scientific_name_author_cont: 'Ë®òËºâËÄÖ(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 scientific_name_author_eq: 'Ë®òËºâËÄÖ(ÂÆåÂÖ®‰∏ÄËá¥)',
                 name_publishedin_year_eq: 'Ë®òËºâÂπ¥(ÂÆåÂÖ®‰∏ÄËá¥)',
                 name_publishedin_year_gteq: 'Ë®òËºâÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ä)',
                 name_publishedin_year_lteq: 'Ë®òËºâÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ã)',
                 actual_dist_year_eq: 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÂÆåÂÖ®‰∏ÄËá¥)',
                 actual_dist_year_gteq: 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ä)',
                 actual_dist_year_lteq: 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ã)',
                 japanese_name_cont: 'ÂíåÂêç(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 japanese_name_eq: 'ÂíåÂêç(ÂÆåÂÖ®‰∏ÄËá¥)',
                 distribution_cont: 'ÂàÜÂ∏É(ÈÉ®ÂàÜ‰∏ÄËá¥)',
                 distribution_eq: 'ÂàÜÂ∏É(ÂÆåÂÖ®‰∏ÄËá¥)',
                 created_at_date_eq: '‰ΩúÊàêÊó•ÊôÇ(Êó•‰ªò‰∏ÄËá¥)',
                 note_cont: 'ÂÇôËÄÉ(ÈÉ®ÂàÜ‰∏ÄËá¥)'
              } %>
              <% columns.each do |col, name| %>
                <div>
                  <label>
                    <input
                      type="checkbox"
                      name="columns[]"
                      class="m-1"
                      data-action="change->filter-choice#updateFilter"
                      value="<%= col %>"
                    >
                    <%= name %>
                  </label>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <div class="border border-gray-300 rounded-lg mb-4 p-2 text-sm overflow-x-auto shadow-lg rounded-lg">
          <%= search_form_for @search,
            html: {
              data: {
                turbo_frame: "data_table",
                controller: "incremental-search",
                action: "input->incremental-search#submit",
                turbo_action: "advance"
              }
            } do |form| %>
            <div class="my-2">
              <%= form.submit class: "text-sm rounded-lg py-1 px-2 normal-button inline-block cursor-pointer", data: {turbo_action: "advance"} %>
              <%= link_to '„ÇØ„É™„Ç¢', url_for + "?cancel_filter=true", class: "text-sm rounded-lg py-1 px-2 normal-button inline-block cursor-pointer", data: {turbo_action: "advance", turbo_prefetch: false} %>
            </div>

            <div class="flex flex-wrap gap-4">
              <div class="w-[200px] hidden" data-filter-choice-field id="all_taxon_name_cont">
                <%= form.label 'Â≠¶Âêç„ÉªÂíåÂêç„ÅÇ„ÅÑ„Åæ„ÅÑ', class: "block" %>
                <%= form.search_field :all_taxon_all_taxon_name_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="kingdom_cont">
                <%= form.label 'Áïå(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_kingdom_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="kingdom_eq">
                <%= form.label 'Áïå(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_kingdom_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="phylum_cont">
                <%= form.label 'ÈñÄ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_phylum_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="phylum_eq">
                <%= form.label 'ÈñÄ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_phylum_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="class_name_cont">
                <%= form.label 'Á∂±(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_class_name_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="class_name_eq">
                <%= form.label 'Á∂±(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_class_name_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="order_cont">
                <%= form.label 'ÁõÆ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_order_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="order_eq">
                <%= form.label 'ÁõÆ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_order_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="suborder_cont">
                <%= form.label '‰∫úÁõÆ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_suborder_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="suborder_eq">
                <%= form.label '‰∫úÁõÆ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_suborder_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="family_cont">
                <%= form.label 'Áßë(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_family_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="family_eq">
                <%= form.label 'Áßë(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_family_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="subfamily_cont">
                <%= form.label '‰∫úÁßë(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subfamily_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="subfamily_eq">
                <%= form.label '‰∫úÁßë(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subfamily_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="tribe_cont">
                <%= form.label 'Êóè(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_tribe_cont, class: "text-sm block shadow.rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="tribe_eq">
                <%= form.label 'Êóè(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_tribe_eq, class: "text-sm block shadow.rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="subtribe_cont">
                <%= form.label '‰∫úÊóè(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subtribe_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="subtribe_eq">
                <%= form.label '‰∫úÊóè(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subtribe_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="genus_cont">
                <%= form.label 'Â±û(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_genus_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="genus_eq">
                <%= form.label 'Â±û(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_genus_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="subgenus_cont">
                <%= form.label '‰∫úÂ±û(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subgenus_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="subgenus_eq">
                <%= form.label '‰∫úÂ±û(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subgenus_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="species_cont">
                <%= form.label 'Á®Æ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_species_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="species_eq">
                <%= form.label 'Á®Æ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_species_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="subspecies_cont">
                <%= form.label '‰∫úÁ®Æ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subspecies_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="subspecies_eq">
                <%= form.label '‰∫úÁ®Æ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_subspecies_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="scientific_name_author_cont">
                <%= form.label 'Ë®òËºâËÄÖ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_scientific_name_author_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="scientific_name_author_eq">
                <%= form.label 'Ë®òËºâËÄÖ(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_scientific_name_author_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="name_publishedin_year_eq">
                <%= form.label 'Ë®òËºâÂπ¥(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_name_publishedin_year_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="name_publishedin_year_gteq">
                <%= form.label 'Ë®òËºâÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ä)', class: "block" %>
                <%= form.search_field :all_taxon_name_publishedin_year_gteq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="name_publishedin_year_lteq">
                <%= form.label 'Ë®òËºâÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ã)', class: "block" %>
                <%= form.search_field :all_taxon_name_publishedin_year_lteq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="actual_dist_year_eq">
                <%= form.label 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_actual_dist_year_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="actual_dist_year_gteq">
                <%= form.label 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ä)', class: "block" %>
                <%= form.search_field :all_taxon_actual_dist_year_gteq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="actual_dist_year_lteq">
                <%= form.label 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥(ÊåáÂÆöÂÄ§‰ª•‰∏ã)', class: "block" %>
                <%= form.search_field :all_taxon_actual_dist_year_lteq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="japanese_name_cont">
                <%= form.label 'ÂíåÂêç(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_japanese_name_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="japanese_name_eq">
                <%= form.label 'ÂíåÂêç(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_japanese_name_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="distribution_cont">
                <%= form.label 'ÂàÜÂ∏É(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_distribution_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
              <div class="w-[200px] hidden" data-filter-choice-field id="distribution_eq">
                <%= form.label 'ÂàÜÂ∏É(ÂÆåÂÖ®‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_distribution_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[150px] hidden" data-filter-choice-field id="created_at_date_eq">
                <%= form.label '‰ΩúÊàêÊó•ÊôÇ(Êó•‰ªò‰∏ÄËá¥)', class: "block" %>
                <%= form.date_field :all_taxon_created_at_date_eq, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>

              <div class="w-[200px] hidden" data-filter-choice-field id="note_cont">
                <%= form.label 'ÂÇôËÄÉ(ÈÉ®ÂàÜ‰∏ÄËá¥)', class: "block" %>
                <%= form.search_field :all_taxon_note_cont, class: "text-sm block shadow rounded-md border border-gray-400 outline-none px-2 py-1 mt-2 w-full" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div
      data-controller="table-column"
      data-mobile-default-visible-columns="<%= ['scientific_and_japanese_name'].to_json %>"
      data-default-visible-columns="<%= ['order', 'family', 'scientific_and_japanese_name'].to_json %>"
      data-table-column-model-name-value="default_taxon"
    >
      <div>
        <div class="relative inline-block">
          <!-- „Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åß„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„Çí„Éà„Ç∞„É´ -->
          <button class="normal-button text-sm px-2 py-1 rounded-md border border-gray" data-action="click->table-column#toggleDropdown" data-table-column-target="toggleButton">
            Ë°®Á§∫È†ÖÁõÆ„ÇíÈÅ∏Êäû ‚ñº
          </button>
          <span class="text-sm px-2">ÂàóÂêç„ÇØ„É™„ÉÉ„ÇØ„Åß‰∏¶„ÅπÊõø„Åà</span>

          <!-- „Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„É°„Éã„É•„Éº -->
          <div class="text-xs absolute top-full left-0 normal-button shadow-lg border p-2 hidden bg-[#E9F5F8] z-50 whitespace-nowrap"
               data-table-column-target="dropdown"
               data-action="click->table-column#keepDropdownOpen">
              <% columns = {
                 scientific_and_japanese_name: 'Â≠¶Âêç + ÂíåÂêç',
                 kingdom: 'Áïå',
                 phylum: 'ÈñÄ',
                 class_name: 'Èãº',
                 order: 'ÁõÆ',
                 suborder: '‰∫úÁõÆ',
                 family: 'Áßë',
                 subfamily: '‰∫úÁßë',
                 tribe: 'Êóè',
                 subtribe: '‰∫úÊóè',
                 genus: 'Â±û',
                 subgenus: '‰∫úÂ±û',
                 species: 'Á®Æ',
                 subspecies: '‰∫úÁ®Æ',
                 scientific_name_author: 'Ë®òËºâËÄÖ',
                 name_publishedin_year: 'Ë®òËºâÂπ¥',
                 actual_dist_year: 'Ë®òËºâÂÆüÊµÅÈÄöÂπ¥',
                 japanese_name: 'ÂíåÂêç',
                 distribution: 'ÂàÜÂ∏É',
                 note: 'ÂÇôËÄÉ',
                 created_at: '‰ΩúÊàêÊó•ÊôÇ'
              } %>
              <% columns.each do |col, name| %>
                <div>
                  <label>
                    <input
                      type="checkbox"
                      name="columns[]"
                      class="m-1"
                      data-action="change->table-column#updateColumn"
                      value="<%= col %>"
                    >
                    <%= name %>
                  </label>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <%= turbo_frame_tag "data_table", data: {action: "turbo:frame-load->bulk-action#resetSelectDisplay"} do %>
          <%= paginate @default_taxa %>
          <div class="overflow-x-auto shadow-lg rounded-lg">
            <table class="text-sm min-w-full table-auto border-collapse">
              <thead data-table-column-target="tableHead" style="display: none">
                <tr class="column-names">
                  <th class="text-sm px-4 py-2 border border-gray-300 text-center w-8">
                    <input
                      type="checkbox"
                      name="selectRows[]"
                      data-action="change->bulk-action#updateAllRow change->validation#toggleSubmitButton change->bulk-action#zeroSelectDisabledBulkUpdate"
                      data-bulk-action-target="selectAllRow"
                      id="selectAllRow"
                    >
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="kingdom">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'kingdom', direction: toggle_direction('kingdom')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Áïå
                      <%= sort_icon('kingdom') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="phylum">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'phylum', direction: toggle_direction('phylum')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ÈñÄ
                      <%= sort_icon('phylum') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="class_name">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'class_name', direction: toggle_direction('class_name')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Èãº
                      <%= sort_icon('class_name') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="order">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'order', direction: toggle_direction('order')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ÁõÆ
                      <%= sort_icon('order') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="suborder">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'suborder', direction: toggle_direction('suborder')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰∫úÁõÆ
                      <%= sort_icon('suborder') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="family">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'family', direction: toggle_direction('family')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Áßë
                      <%= sort_icon('family') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="subfamily">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'subfamily', direction: toggle_direction('subfamily')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰∫úÁßë
                      <%= sort_icon('subfamily') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="tribe">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'tribe', direction: toggle_direction('tribe')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Êóè
                      <%= sort_icon('tribe') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="subtribe">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'subtribe', direction: toggle_direction('subtribe')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰∫úÊóè
                      <%= sort_icon('subtribe') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="genus">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'genus', direction: toggle_direction('genus')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Â±û
                      <%= sort_icon('genus') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="subgenus">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'subgenus', direction: toggle_direction('subgenus')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰∫úÂ±û
                      <%= sort_icon('subgenus') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="species">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'species', direction: toggle_direction('species')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Á®Æ
                      <%= sort_icon('species') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="subspecies">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'subspecies', direction: toggle_direction('subspecies')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰∫úÁ®Æ
                      <%= sort_icon('subspecies') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="scientific_name_author">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'scientific_name_author', direction: toggle_direction('scientific_name_author')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Ë®òËºâËÄÖ
                      <%= sort_icon('scientific_name_author') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="name_publishedin_year">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'name_publishedin_year', direction: toggle_direction('name_publishedin_year')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Ë®òËºâÂπ¥
                      <%= sort_icon('name_publishedin_year') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="actual_dist_year">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'actual_dist_year', direction: toggle_direction('actual_dist_year')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Ë®òËºâÂÆüÊµÅÈÄöÂπ¥
                      <%= sort_icon('actual_dist_year') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="japanese_name">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'japanese_name', direction: toggle_direction('japanese_name')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ÂíåÂêç
                      <%= sort_icon('japanese_name') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="scientific_and_japanese_name">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'scientific_and_japanese_name', direction: toggle_direction('scientific_and_japanese_name')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      Â≠¶Âêç + ÂíåÂêç
                      <%= sort_icon('scientific_and_japanese_name') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left" data-table-column-visible-columns id="distribution">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'distribution', direction: toggle_direction('distribution')), class: "font-bold flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ÂàÜÂ∏É
                      <%= sort_icon('distribution') %>
                    <% end %>
                  </th>

                  <th class="px-4 py-2 border border-gray-300 text-left hidden" data-table-column-visible-columns id="created_at">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'created_at', direction: toggle_direction('created_at')), class: "font-bold  flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ‰ΩúÊàêÊó•ÊôÇ
                      <%= sort_icon('created_at') %>
                    <% end %>
                  </th>
                  <th class="px-4 py-2 border border-gray-300 text-left hidden" data-table-column-visible-columns id="note">
                    <%= link_to default_taxa_url_with_ranmemory(sort: 'note', direction: toggle_direction('note')), class: "font-bold  flex items-center", data: {turbo_action: "advance", turbo_prefetch: false} do %>
                      ÂÇôËÄÉ
                      <%= sort_icon('note') %>
                    <% end %>
                  </th>
                  <th class="px-4 py-2 border border-gray-300 text-left">Êìç‰Ωú</th>
                </tr>
              </thead>
              <tbody data-table-column-target="tableBody" style="display: none">
                <% @default_taxa.each do |default_taxon| %>
                  <tr id="default_taxon_<%= default_taxon.id %>" class="row-hover">
                    <!-- turbo_stream_from „ÅßÂâäÈô§ÂØæË±°„ÅÆË°å„ÇíÁõ£Ë¶ñ -->
                    <%= turbo_stream_from "default_taxon_#{default_taxon.id}" %>
                    <td class="text-sm px-4 py-1 border border-gray-300 text-center w-8">
                      <input
                        type="checkbox"
                        name="selectRows[]"
                        value="<%= default_taxon.id %>"
                        data-bulk-action-target="selectRow"
                        data-action="change->bulk-action#updateSelectRow change->validation#toggleSubmitButton change->bulk-action#zeroSelectDisabledBulkUpdate"
                        id="bulk-action-select-row-<%= default_taxon.id %>"
                      >
                    </td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="kingdom"><%= default_taxon.kingdom %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="phylum"><%= default_taxon.phylum %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="class_name"><%= default_taxon.class_name %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="order"><%= default_taxon.order %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="suborder"><%= default_taxon.suborder %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="family"><%= default_taxon.family %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="subfamily"><%= default_taxon.subfamily %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="tribe"><%= default_taxon.tribe %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="subtribe"><%= default_taxon.subtribe %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="genus"><%= default_taxon.genus %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="subgenus"><%= default_taxon.subgenus %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="species"><%= default_taxon.species %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="subspecies"><%= default_taxon.subspecies %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="scientific_name_author"><%= default_taxon.scientific_name_author %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="name_publishedin_year"><%= default_taxon.name_publishedin_year %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="actual_dist_year"><%= default_taxon.actual_dist_year %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="japanese_name"><%= default_taxon.japanese_name %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="scientific_and_japanese_name"><%= default_taxon.scientific_and_japanese_name %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300" data-table-column-visible-columns id="distribution"><%= default_taxon.distribution %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300 hidden" data-table-column-visible-columns id="created_at"><%= default_taxon.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300 hidden" data-table-column-visible-columns id="note"><%= default_taxon.note %></td>
                    <td class="text-sm px-4 py-1 border border-gray-300">
                      <div class="flex gap-3 flex-col sm:flex-row">
                        <!-- Ë©≥Á¥∞„É™„É≥„ÇØ („Éö„Éº„Ç∏ÈÅ∑Áßª) -->
                        <%= link_to "Ë©≥Á¥∞", default_taxon, class: "rounded-lg py-1 px-3 text-sm normal-button text-center",
                          data: { turbo_frame: "content-zone", turbo_action: "advance" } %>

                        <!-- Ë§áË£Ω„É™„É≥„ÇØ („Éö„Éº„Ç∏ÈÅ∑Áßª) -->
                        <%= link_to "„Ç´„Çπ„Çø„É†", new_custom_taxon_path(default_taxon_id: default_taxon.id), class: "rounded-lg py-1 px-3 text-sm normal-button text-center",
                          data: { turbo_frame: "content-zone", turbo_action: "advance" } %>
                      </div>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
          <% if @default_taxa.empty? %>
            <div class="m-12">
              „Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü
            </div>
          <% end %>
          <div data-table-column-target="paginate" class="hidden">
            <%= paginate @default_taxa %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
